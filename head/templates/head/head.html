{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
	<title>Home</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	 <link rel="stylesheet" type="text/css" href="{% static './home.css' %}">
	 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
 	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

	<link href="https://fonts.googleapis.com/css2?family=Gotu&family=Righteous&display=swap" rel="stylesheet">
		<style>
		.jumbotron {
		  background-image: url("{% static '/images/sky1.jpg' %}"); 
		  background-repeat: no-repeat;
		  background-attachment: fixed;
		  background-size: cover;
		}
		</style>
</head>
<body> 
	<div class="container" >
		<div class="title-header">
      <a href='#' onclick="window.location.href='/routebackhome'"><img src="{% static '/images/maps.png' %}"  style="float: left; height: 60px;"></a> 
       PREVENTIVE MAINTENANCE LOG
      <img src="{% static '/images/aai.jpg' %}" style="float: right;">
    </div>
		<div class="jumbotron">
			<div class="card tabcol t1">
        <p style="text-align: center; margin-bottom: 0px;"><u>Total Overview</u></p>
        <div style="margin-left:4%; width:23%; float:left; text-align:center; margin-top: 10px; margin-bottom: auto;">
          <b style="color:black; font-size:40px; line-height:40px">{{totsubmit}}</b><br>
          <b style="font-size: 10px; opacity:80%">Reports Submitted</b>
        </div>
        <div style="width:23%; float:left; text-align:center; margin-top: 10px; margin-bottom: auto;">
          <b style="color:#B80808; font-size:40px; line-height:40px">{{totpen}}</b><br>
          <b style="font-size: 10px; opacity:80%">Pending Submissions</b>
        </div>
        <div style="width:23%; float:left; text-align:center; margin-top: 10px; margin-bottom: auto;">
          <b style="color:#05713D; font-size:40px; line-height:40px">{{totapprove}}</b><br>
          <b style="font-size: 10px; opacity:80%">Reports Approved</b>
        </div>
        <div style="width:23%; float:left;text-align:center; margin-top: 10px; margin-bottom: auto;">
          <b style="color:#11036A; font-size:40px; line-height:40px">{{totnapprove}}</b><br>
          <b style="font-size: 10px; opacity:80%">Reports Declined</b>
        </div>
      </div>
			<div class="row">

				<div class="data-table" style="margin-top: 50px;">
          			<div class="col-md-2">
          			</div>

					<div class="col-md-2" >
						<div class="card tabcard">
							<ul class="nav nav-pills nav-stacked">
							    <li class="active"><a class="todays" data-toggle="pill" href="#today" >Communication</a></li>
								<li><a class="faculty" data-toggle="pill" href="#facilities" >Navigation</a></li>
								<li><a class="faculty" data-toggle="pill" href="#verific" >Surveillance</a></li>
								
               </ul>
            </div>
					</div>
        
        
          <div class="col-md-5 card tabcol">
            <div class="tab-content" style="align-items: center">
                <div id="today" class="tab-pane fade in active fac"><!--check here-->
                  <h3 class="card" style="margin-left:25%; width:auto!important; height: auto;  background-color: #1e72fa; border-radius: 20px; width: 26rem!important; color:white">&nbsp Quarterly Overview</h3>
                {% block content %}
                    <div style="margin-left:4%; width:23%; float:left; text-align:center;">
                      <b style="color:black; font-size:25px; line-height:25px">{{comsubmit}}</b><br>
                      <b style="font-size: 10px; opacity:80%">Reports Submitted</b>
                    </div>
                    <div style="width:23%; float:left; text-align:center;">
                      <b style="color:#B80808; font-size:25px; line-height:25px">{{compend}}</b><br>
                      <b style="font-size: 10px; opacity:80%">Pending Submissions</b>
                    </div>
                    <div style="width:23%; float:left; text-align:center;">
                      <b style="color:#05713D; font-size:25px; line-height:25px">{{comapprove}}</b><br>
                      <b style="font-size: 10px; opacity:80%">Reports Approved</b>
                    </div>
                    <div style="width:23%; float:left;text-align:center;">
                      <b style="color:#11036A; font-size:25px; line-height:25px">{{comnapprove}}</b><br>
                      <b style="font-size: 10px; opacity:80%">Reports Declined</b>
                    </div>
                    <br><br><br><br>
                    <div style="margin-left:15%; width:35%; float:left; text-align:center;  border-right: 6px dashed #1e72fa;">
                      <div class="chart" style="position: relative; height:12vh; width:12vw; display: block; margin-left: auto;   margin-right: auto; ">
                        <canvas id="creq"></canvas>
                    </div>
                    <b style="font-size: 10px">Maintenance Performed</b><br>
                    {{commaintain_per}}%
                  </div>
                  <div style="margin-right: 15% width:35%; float:left; text-align:center">
                    <div class="chart" style="position: relative; height:12vh; width:12vw; display: block; margin-left: auto;   margin-right: auto;">
                        <canvas id="cnotreq"></canvas>
                    </div>
                    <b style="font-size: 10px">Equipments In Order</b><br>
                    {{comfirst}}
                  </div>
                  <br><br>
                <!-- <button class="btn-primary"  style="float: right; font-size:12px!important; padding:5px 15px!important; background-color: #1e72fa; border-radius: 20px; border:#1e72fa" onclick='windows.location.href="dgm/communication"'>MORE DETAILS</button> -->
                
                <button class="btn-primary" style="float: right;" onclick='window.location.href="/dgm/communication"'>MORE DETAILS</button>
            
              </div>
                <div id="facilities" class="tab-pane fade fac">
                  <h3 class="card" style="margin-left:25%; width:auto!important; height: auto;  background-color: #1e72fa; border-radius: 20px; width: 26rem!important; color:white">&nbsp Quarterly Overview</h3>
                    <div style="margin-left:4%; width:23%; float:left; text-align:center;">
                      <b style="color:black; font-size:25px; line-height:25px">{{navsubmit}}</b><br>
                      <b style="font-size: 10px; opacity:80%">Reports Submitted</b>
                    </div>
                    <div style="width:23%; float:left; text-align:center;">
                      <b style="color:#B80808; font-size:25px; line-height:25px">{{navpend}}</b><br>
                      <b style="font-size: 10px; opacity:80%">Pending Submissions</b>
                    </div>
                    <div style="width:23%; float:left; text-align:center;">
                      <b style="color:#05713D; font-size:25px; line-height:25px">{{navapprove}}</b><br>
                      <b style="font-size: 10px; opacity:80%">Reports Approved</b>
                    </div>
                    <div style="width:23%; float:left;text-align:center;">
                      <b style="color:#11036A; font-size:25px; line-height:25px">{{navnapprove}}</b><br>
                      <b style="font-size: 10px; opacity:80%">Reports Declined</b>
                    </div>
                    <br><br><br><br>
                    <div style="margin-left:15%; width:35%; float:left; text-align:center;  border-right: 6px dashed #1e72fa;">
                      <div class="chart" style="position: relative; height:12vh; width:12vw; display: block; margin-left: auto;   margin-right: auto; ">
                        <canvas id="nreq"></canvas>
                    </div>
                    <b style="font-size: 10px">Maintenance Performed</b><br>
                    {{navmaintain_per}}%
                  </div>
                  <div style="margin-right: 15% width:35%; float:left; text-align:center">
                    <div class="chart" style="position: relative; height:12vh; width:12vw; display: block; margin-left: auto;   margin-right: auto;">
                        <canvas id="nnotreq"></canvas>
                    </div>
                    <b style="font-size: 10px">Equipments In Order</b><br>
                    {{navfirst}}%
                  </div>
                  <br><br>
          <!--		 	<button class="btn-primary"  style="font-size:12px!important; padding:5px 15px!important; float: right; background-color: #1e72fa; border-radius: 20px; border:#1e72fa" onclick='windows.location.href="dgm/nav"'>MORE DETAILS</button>
              -->   <button class="btn-primary" style="float: right;" onclick='window.location.href="/dgm/nav"'>MORE DETAILS</button>
          
              </div>
                
              <div id="verific" class="tab-pane fade fac">
                <h3 class="card" style="margin-left:25%; width:auto!important; height: auto;  background-color: #1e72fa; border-radius: 20px; width: 26rem!important; color:white">&nbsp Quarterly Overview</h3>
                  <div  style="margin-left:4%; width:23%; float:left; text-align:center;">
                      <b style="color:black; font-size:25px; line-height:25px">{{scctvsubmit}}</b><br>
                      <b style="font-size: 10px; opacity:80%">Reports Submitted</b>
                    </div>
                    <div style="width:23%; float:left; text-align:center;">
                      <b style="color:#B80808; font-size:25px; line-height:25px">{{scctvpend}}</b><br>
                      <b style="font-size: 10px; opacity:80%">Pending Submissions</b>
                    </div>
                    <div style="width:23%; float:left; text-align:center;">
                      <b style="color:#05713D; font-size:25px; line-height:25px">{{scctvapprove}}</b><br>
                      <b style="font-size: 10px; opacity:80%">Reports Approved</b>
                    </div>
                    <div style="width:23%; float:left;text-align:center;">
                      <b style="color:#11036A; font-size:25px; line-height:25px">{{scctvnapprove}}</b><br>
                      <b style="font-size: 10px; opacity:80%">Reports Declined</b>
                    </div>
                    <br><br><br><br>
                    <div style="margin-left:15%; width:35%; float:left; text-align:center;  border-right: 6px dashed #1e72fa;">
                      <div class="chart" style="position: relative; height:12vh; width:12vw; display: block; margin-left: auto;   margin-right: auto; ">
                        <canvas id="sreq"></canvas>
                    </div>
                    <b style="font-size: 10px">Maintenance Performed</b><br>
                    {{scctvmaintain_per}}%
                  </div>
                  <div class="tab-part"  style="margin-right: 15% width:35%; float:left; text-align:center">
                    <div class="chart" style="position: relative; height:12vh; width:12vw; display: block; margin-left: auto;   margin-right: auto;">
                        <canvas id="snotreq"></canvas>
                    </div>
                    <b style="font-size: 10px">Equipments In Order</b><br>
                    {{scctvfirst}}%
                  </div>
                  <br><br>
                <!--<button class="btn-primary"  style="font-size:12px!important; padding:5px 15px!important;float: right; background-color: #1e72fa; border-radius: 20px; border:#1e72fa" onclick='windows.location.href="dgm/surv"'>MORE DETAILS</button>
                --> <button class="btn-primary" style="float: right;" onclick='window.location.href="/dgm/surv"'>MORE DETAILS</button>
          
                {% endblock %}<!--till here-->
              </div>
            </div>		
          </div>
        </div>
			</div>
		</div>
	</div>
	



	<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
 
<script>
Chart.defaults.global.defaultFontFamily = "Lato";
Chart.defaults.global.defaultFontSize = 10;

    Chart.pluginService.register({
      beforeDraw: function(chart) {
        if (chart.config.options.elements.center) {
          // Get ctx from string
          var ctx = chart.chart.ctx;

          // Get options from the center object in options
          var centerConfig = chart.config.options.elements.center;
          var fontStyle = centerConfig.fontStyle || 'Arial';
          var txt = centerConfig.text;
          var color = centerConfig.color || '#000';
          var maxFontSize = centerConfig.maxFontSize || 75;
          var sidePadding = centerConfig.sidePadding || 20;
          var sidePaddingCalculated = (sidePadding / 100) * (chart.innerRadius * 2)
          // Start with a base font of 30px
          ctx.font = "30px " + fontStyle;

          // Get the width of the string and also the width of the element minus 10 to give it 5px side padding
          var stringWidth = ctx.measureText(txt).width;
          var elementWidth = (chart.innerRadius * 2) - sidePaddingCalculated;

          // Find out how much the font can grow in width.
          var widthRatio = elementWidth / stringWidth;
          var newFontSize = Math.floor(30 * widthRatio);
          var elementHeight = (chart.innerRadius * 2);

          // Pick a new font size so it will not be larger than the height of label.
          var fontSizeToUse = Math.min(newFontSize, elementHeight, maxFontSize);
          var minFontSize = centerConfig.minFontSize;
          var lineHeight = centerConfig.lineHeight || 25;
          var wrapText = false;

          if (minFontSize === undefined) {
            minFontSize = 20;
          }

          if (minFontSize && fontSizeToUse < minFontSize) {
            fontSizeToUse = minFontSize;
            wrapText = true;
          }

          // Set font settings to draw it correctly.
          ctx.textAlign = 'center';
          ctx.textBaseline = 'middle';
          var centerX = ((chart.chartArea.left + chart.chartArea.right) / 2);
          var centerY = ((chart.chartArea.top + chart.chartArea.bottom) / 2);
          ctx.font = fontSizeToUse + "px " + fontStyle;
          ctx.fillStyle = color;

          if (!wrapText) {
            ctx.fillText(txt, centerX, centerY);
            return;
          }

          var words = txt.split(' ');
          var line = '';
          var lines = [];

          // Break words up into multiple lines if necessary
          for (var n = 0; n < words.length; n++) {
            var testLine = line + words[n] + ' ';
            var metrics = ctx.measureText(testLine);
            var testWidth = metrics.width;
            if (testWidth > elementWidth && n > 0) {
              lines.push(line);
              line = words[n] + ' ';
            } else {
              line = testLine;
            }
          }

          // Move the center up depending on line height and number of lines
          centerY -= (lines.length / 2) * lineHeight;

          for (var n = 0; n < lines.length; n++) {
            ctx.fillText(lines[n], centerX, centerY);
            centerY += lineHeight;
          }
          //Draw text in center
          ctx.fillText(line, centerX, centerY);
        }
      }
    });


var config = {
  type: 'doughnut',
  data: {
    labels: [
      "Maintenance Performed",
      "Others"
    ],
    datasets: [{
      data: [{{ commaintain }}, {{comlog}} + {{comrep}}],  /*check here*/
      backgroundColor: [
        "#10E980",
        "#DBDBDB"
      ],
      
       borderColor: "white",
            borderWidth: 2
    }]
  },
  
  options: {
    legend:{
      display:false
    },
    cutoutPercentage:70,
    elements: {
      center: {
        text:'ðŸ§°',
        color: '#1e27fa', // Default is #000000
        fontStyle: 'Arial', // Default is Arial
        sidePadding: 20, // Default is 20 (as a percentage)
        minFontSize: 15, // Default is 20 (in px), set to false and text will not wrap.
        lineHeight: 25 // Default is 25 (in px), used for when text wraps
      }
    }
  }
};

var ctx = document.getElementById("creq").getContext("2d");
var myChart = new Chart(ctx, config);

</script>

<script>
	Chart.defaults.global.defaultFontFamily = "Lato";
Chart.defaults.global.defaultFontSize = 10;

    Chart.pluginService.register({
      beforeDraw: function(chart) {
        if (chart.config.options.elements.center) {
          // Get ctx from string
          var ctx = chart.chart.ctx;

          // Get options from the center object in options
          var centerConfig = chart.config.options.elements.center;
          var fontStyle = centerConfig.fontStyle || 'Arial';
          var txt = centerConfig.text;
          var color = centerConfig.color || '#000';
          var maxFontSize = centerConfig.maxFontSize || 75;
          var sidePadding = centerConfig.sidePadding || 20;
          var sidePaddingCalculated = (sidePadding / 100) * (chart.innerRadius * 2)
          // Start with a base font of 30px
          ctx.font = "30px " + fontStyle;

          // Get the width of the string and also the width of the element minus 10 to give it 5px side padding
          var stringWidth = ctx.measureText(txt).width;
          var elementWidth = (chart.innerRadius * 2) - sidePaddingCalculated;

          // Find out how much the font can grow in width.
          var widthRatio = elementWidth / stringWidth;
          var newFontSize = Math.floor(30 * widthRatio);
          var elementHeight = (chart.innerRadius * 2);

          // Pick a new font size so it will not be larger than the height of label.
          var fontSizeToUse = Math.min(newFontSize, elementHeight, maxFontSize);
          var minFontSize = centerConfig.minFontSize;
          var lineHeight = centerConfig.lineHeight || 25;
          var wrapText = false;

          if (minFontSize === undefined) {
            minFontSize = 20;
          }

          if (minFontSize && fontSizeToUse < minFontSize) {
            fontSizeToUse = minFontSize;
            wrapText = true;
          }

          // Set font settings to draw it correctly.
          ctx.textAlign = 'center';
          ctx.textBaseline = 'middle';
          var centerX = ((chart.chartArea.left + chart.chartArea.right) / 2);
          var centerY = ((chart.chartArea.top + chart.chartArea.bottom) / 2);
          ctx.font = fontSizeToUse + "px " + fontStyle;
          ctx.fillStyle = color;

          if (!wrapText) {
            ctx.fillText(txt, centerX, centerY);
            return;
          }

          var words = txt.split(' ');
          var line = '';
          var lines = [];

          // Break words up into multiple lines if necessary
          for (var n = 0; n < words.length; n++) {
            var testLine = line + words[n] + ' ';
            var metrics = ctx.measureText(testLine);
            var testWidth = metrics.width;
            if (testWidth > elementWidth && n > 0) {
              lines.push(line);
              line = words[n] + ' ';
            } else {
              line = testLine;
            }
          }

          // Move the center up depending on line height and number of lines
          centerY -= (lines.length / 2) * lineHeight;

          for (var n = 0; n < lines.length; n++) {
            ctx.fillText(lines[n], centerX, centerY);
            centerY += lineHeight;
          }
          //Draw text in center
          ctx.fillText(line, centerX, centerY);
        }
      }
    });


var config = {
  type: 'doughnut',
  data: {
    labels: [
      "Equipment fine",
      "Others"
    ],
    datasets: [{
      data: [{{ncomlog}},{{ commaintain }} + {{ comrep }}],   /*check here*/
      backgroundColor: [
        "#10E980",
        "#DBDBDB"
      ],
      
       borderColor: "white",
            borderWidth: 2
    }]
  },
  
  options: {
    legend:{
      display:false
    },
    cutoutPercentage:70,

    elements: {
      center: {
        text:'ðŸ‘',
        color: '#1e27fa', // Default is #000000
        fontStyle: 'Arial', // Default is Arial
        sidePadding: 20, // Default is 20 (as a percentage)
        minFontSize: 15, // Default is 20 (in px), set to false and text will not wrap.
        lineHeight: 25 // Default is 25 (in px), used for when text wraps
      }
    }
  }
};

var ctx = document.getElementById("cnotreq").getContext("2d");
var myChart = new Chart(ctx, config);

</script>


<script>
Chart.defaults.global.defaultFontFamily = "Lato";
Chart.defaults.global.defaultFontSize = 10;

    Chart.pluginService.register({
      beforeDraw: function(chart) {
        if (chart.config.options.elements.center) {
          // Get ctx from string
          var ctx = chart.chart.ctx;

          // Get options from the center object in options
          var centerConfig = chart.config.options.elements.center;
          var fontStyle = centerConfig.fontStyle || 'Arial';
          var txt = centerConfig.text;
          var color = centerConfig.color || '#000';
          var maxFontSize = centerConfig.maxFontSize || 75;
          var sidePadding = centerConfig.sidePadding || 20;
          var sidePaddingCalculated = (sidePadding / 100) * (chart.innerRadius * 2)
          // Start with a base font of 30px
          ctx.font = "30px " + fontStyle;

          // Get the width of the string and also the width of the element minus 10 to give it 5px side padding
          var stringWidth = ctx.measureText(txt).width;
          var elementWidth = (chart.innerRadius * 2) - sidePaddingCalculated;

          // Find out how much the font can grow in width.
          var widthRatio = elementWidth / stringWidth;
          var newFontSize = Math.floor(30 * widthRatio);
          var elementHeight = (chart.innerRadius * 2);

          // Pick a new font size so it will not be larger than the height of label.
          var fontSizeToUse = Math.min(newFontSize, elementHeight, maxFontSize);
          var minFontSize = centerConfig.minFontSize;
          var lineHeight = centerConfig.lineHeight || 25;
          var wrapText = false;

          if (minFontSize === undefined) {
            minFontSize = 20;
          }

          if (minFontSize && fontSizeToUse < minFontSize) {
            fontSizeToUse = minFontSize;
            wrapText = true;
          }

          // Set font settings to draw it correctly.
          ctx.textAlign = 'center';
          ctx.textBaseline = 'middle';
          var centerX = ((chart.chartArea.left + chart.chartArea.right) / 2);
          var centerY = ((chart.chartArea.top + chart.chartArea.bottom) / 2);
          ctx.font = fontSizeToUse + "px " + fontStyle;
          ctx.fillStyle = color;

          if (!wrapText) {
            ctx.fillText(txt, centerX, centerY);
            return;
          }

          var words = txt.split(' ');
          var line = '';
          var lines = [];

          // Break words up into multiple lines if necessary
          for (var n = 0; n < words.length; n++) {
            var testLine = line + words[n] + ' ';
            var metrics = ctx.measureText(testLine);
            var testWidth = metrics.width;
            if (testWidth > elementWidth && n > 0) {
              lines.push(line);
              line = words[n] + ' ';
            } else {
              line = testLine;
            }
          }

          // Move the center up depending on line height and number of lines
          centerY -= (lines.length / 2) * lineHeight;

          for (var n = 0; n < lines.length; n++) {
            ctx.fillText(lines[n], centerX, centerY);
            centerY += lineHeight;
          }
          //Draw text in center
          ctx.fillText(line, centerX, centerY);
        }
      }
    });


var config = {
  type: 'doughnut',
  data: {
    labels: [
      "Maintenance Performed",
      "Others"
    ],
    datasets: [{
      data: [{{ navmaintain }}, {{navlog}} + {{navrep}}],    /*check here*/
      backgroundColor: [
        "#10E980",
        "#DBDBDB"
      ],
      
       borderColor: "white",
            borderWidth: 2
    }]
  },
  
  options: {
    legend:{
      display:false
    },
    cutoutPercentage:70,
    elements: {
      center: {
        text:'ðŸ§°',
        color: '#1e27fa', // Default is #000000
        fontStyle: 'Arial', // Default is Arial
        sidePadding: 20, // Default is 20 (as a percentage)
        minFontSize: 15, // Default is 20 (in px), set to false and text will not wrap.
        lineHeight: 25 // Default is 25 (in px), used for when text wraps
      }
    }
  }
};

var ctx = document.getElementById("nreq").getContext("2d");
var myChart = new Chart(ctx, config);

</script>

<script>
	Chart.defaults.global.defaultFontFamily = "Lato";
Chart.defaults.global.defaultFontSize = 10;

    Chart.pluginService.register({
      beforeDraw: function(chart) {
        if (chart.config.options.elements.center) {
          // Get ctx from string
          var ctx = chart.chart.ctx;

          // Get options from the center object in options
          var centerConfig = chart.config.options.elements.center;
          var fontStyle = centerConfig.fontStyle || 'Arial';
          var txt = centerConfig.text;
          var color = centerConfig.color || '#000';
          var maxFontSize = centerConfig.maxFontSize || 75;
          var sidePadding = centerConfig.sidePadding || 20;
          var sidePaddingCalculated = (sidePadding / 100) * (chart.innerRadius * 2)
          // Start with a base font of 30px
          ctx.font = "30px " + fontStyle;

          // Get the width of the string and also the width of the element minus 10 to give it 5px side padding
          var stringWidth = ctx.measureText(txt).width;
          var elementWidth = (chart.innerRadius * 2) - sidePaddingCalculated;

          // Find out how much the font can grow in width.
          var widthRatio = elementWidth / stringWidth;
          var newFontSize = Math.floor(30 * widthRatio);
          var elementHeight = (chart.innerRadius * 2);

          // Pick a new font size so it will not be larger than the height of label.
          var fontSizeToUse = Math.min(newFontSize, elementHeight, maxFontSize);
          var minFontSize = centerConfig.minFontSize;
          var lineHeight = centerConfig.lineHeight || 25;
          var wrapText = false;

          if (minFontSize === undefined) {
            minFontSize = 20;
          }

          if (minFontSize && fontSizeToUse < minFontSize) {
            fontSizeToUse = minFontSize;
            wrapText = true;
          }

          // Set font settings to draw it correctly.
          ctx.textAlign = 'center';
          ctx.textBaseline = 'middle';
          var centerX = ((chart.chartArea.left + chart.chartArea.right) / 2);
          var centerY = ((chart.chartArea.top + chart.chartArea.bottom) / 2);
          ctx.font = fontSizeToUse + "px " + fontStyle;
          ctx.fillStyle = color;

          if (!wrapText) {
            ctx.fillText(txt, centerX, centerY);
            return;
          }

          var words = txt.split(' ');
          var line = '';
          var lines = [];

          // Break words up into multiple lines if necessary
          for (var n = 0; n < words.length; n++) {
            var testLine = line + words[n] + ' ';
            var metrics = ctx.measureText(testLine);
            var testWidth = metrics.width;
            if (testWidth > elementWidth && n > 0) {
              lines.push(line);
              line = words[n] + ' ';
            } else {
              line = testLine;
            }
          }

          // Move the center up depending on line height and number of lines
          centerY -= (lines.length / 2) * lineHeight;

          for (var n = 0; n < lines.length; n++) {
            ctx.fillText(lines[n], centerX, centerY);
            centerY += lineHeight;
          }
          //Draw text in center
          ctx.fillText(line, centerX, centerY);
        }
      }
    });


var config = {
  type: 'doughnut',
  data: {
    labels: [
      "Equipment fine",
      "Others"
    ],
    datasets: [{
      data: [{{navlog}},{{ navmaintain }} + {{ navrep }}],    /*check here*/
      backgroundColor: [
        "#10E980",
        "#DBDBDB"
      ],
      
       borderColor: "white",
            borderWidth: 2
    }]
  },
  
  options: {
    legend:{
      display:false
    },
    cutoutPercentage:70,

    elements: {
      center: {
        text:'ðŸ‘',
        color: '#1e27fa', // Default is #000000
        fontStyle: 'Arial', // Default is Arial
        sidePadding: 20, // Default is 20 (as a percentage)
        minFontSize: 15, // Default is 20 (in px), set to false and text will not wrap.
        lineHeight: 25 // Default is 25 (in px), used for when text wraps
      }
    }
  }
};

var ctx = document.getElementById("nnotreq").getContext("2d");
var myChart = new Chart(ctx, config);

</script>


<script>
Chart.defaults.global.defaultFontFamily = "Lato";
Chart.defaults.global.defaultFontSize = 10;

    Chart.pluginService.register({
      beforeDraw: function(chart) {
        if (chart.config.options.elements.center) {
          // Get ctx from string
          var ctx = chart.chart.ctx;

          // Get options from the center object in options
          var centerConfig = chart.config.options.elements.center;
          var fontStyle = centerConfig.fontStyle || 'Arial';
          var txt = centerConfig.text;
          var color = centerConfig.color || '#000';
          var maxFontSize = centerConfig.maxFontSize || 75;
          var sidePadding = centerConfig.sidePadding || 20;
          var sidePaddingCalculated = (sidePadding / 100) * (chart.innerRadius * 2)
          // Start with a base font of 30px
          ctx.font = "30px " + fontStyle;

          // Get the width of the string and also the width of the element minus 10 to give it 5px side padding
          var stringWidth = ctx.measureText(txt).width;
          var elementWidth = (chart.innerRadius * 2) - sidePaddingCalculated;

          // Find out how much the font can grow in width.
          var widthRatio = elementWidth / stringWidth;
          var newFontSize = Math.floor(30 * widthRatio);
          var elementHeight = (chart.innerRadius * 2);

          // Pick a new font size so it will not be larger than the height of label.
          var fontSizeToUse = Math.min(newFontSize, elementHeight, maxFontSize);
          var minFontSize = centerConfig.minFontSize;
          var lineHeight = centerConfig.lineHeight || 25;
          var wrapText = false;

          if (minFontSize === undefined) {
            minFontSize = 20;
          }

          if (minFontSize && fontSizeToUse < minFontSize) {
            fontSizeToUse = minFontSize;
            wrapText = true;
          }

          // Set font settings to draw it correctly.
          ctx.textAlign = 'center';
          ctx.textBaseline = 'middle';
          var centerX = ((chart.chartArea.left + chart.chartArea.right) / 2);
          var centerY = ((chart.chartArea.top + chart.chartArea.bottom) / 2);
          ctx.font = fontSizeToUse + "px " + fontStyle;
          ctx.fillStyle = color;

          if (!wrapText) {
            ctx.fillText(txt, centerX, centerY);
            return;
          }

          var words = txt.split(' ');
          var line = '';
          var lines = [];

          // Break words up into multiple lines if necessary
          for (var n = 0; n < words.length; n++) {
            var testLine = line + words[n] + ' ';
            var metrics = ctx.measureText(testLine);
            var testWidth = metrics.width;
            if (testWidth > elementWidth && n > 0) {
              lines.push(line);
              line = words[n] + ' ';
            } else {
              line = testLine;
            }
          }

          // Move the center up depending on line height and number of lines
          centerY -= (lines.length / 2) * lineHeight;

          for (var n = 0; n < lines.length; n++) {
            ctx.fillText(lines[n], centerX, centerY);
            centerY += lineHeight;
          }
          //Draw text in center
          ctx.fillText(line, centerX, centerY);
        }
      }
    });


var config = {
  type: 'doughnut',
  data: {
    labels: [
      "Maintenance Performed",
      "Others"
    ],
    datasets: [{
      data: [{{ scctvmaintain }}, {{scctvlog}} + {{scctvrep}}],    /*check here*/
      backgroundColor: [
        "#10E980",
        "#DBDBDB"
      ],
      
       borderColor: "white",
            borderWidth: 2
    }]
  },
  
  options: {
    legend:{
      display:false
    },
    cutoutPercentage:70,
    elements: {
      center: {
        text:'ðŸ§°',
        color: '#1e27fa', // Default is #000000
        fontStyle: 'Arial', // Default is Arial
        sidePadding: 20, // Default is 20 (as a percentage)
        minFontSize: 15, // Default is 20 (in px), set to false and text will not wrap.
        lineHeight: 25 // Default is 25 (in px), used for when text wraps
      }
    }
  }
};

var ctx = document.getElementById("sreq").getContext("2d");
var myChart = new Chart(ctx, config);

</script>

<script>
	Chart.defaults.global.defaultFontFamily = "Lato";
Chart.defaults.global.defaultFontSize = 10;

    Chart.pluginService.register({
      beforeDraw: function(chart) {
        if (chart.config.options.elements.center) {
          // Get ctx from string
          var ctx = chart.chart.ctx;

          // Get options from the center object in options
          var centerConfig = chart.config.options.elements.center;
          var fontStyle = centerConfig.fontStyle || 'Arial';
          var txt = centerConfig.text;
          var color = centerConfig.color || '#000';
          var maxFontSize = centerConfig.maxFontSize || 75;
          var sidePadding = centerConfig.sidePadding || 20;
          var sidePaddingCalculated = (sidePadding / 100) * (chart.innerRadius * 2)
          // Start with a base font of 30px
          ctx.font = "30px " + fontStyle;

          // Get the width of the string and also the width of the element minus 10 to give it 5px side padding
          var stringWidth = ctx.measureText(txt).width;
          var elementWidth = (chart.innerRadius * 2) - sidePaddingCalculated;

          // Find out how much the font can grow in width.
          var widthRatio = elementWidth / stringWidth;
          var newFontSize = Math.floor(30 * widthRatio);
          var elementHeight = (chart.innerRadius * 2);

          // Pick a new font size so it will not be larger than the height of label.
          var fontSizeToUse = Math.min(newFontSize, elementHeight, maxFontSize);
          var minFontSize = centerConfig.minFontSize;
          var lineHeight = centerConfig.lineHeight || 25;
          var wrapText = false;

          if (minFontSize === undefined) {
            minFontSize = 20;
          }

          if (minFontSize && fontSizeToUse < minFontSize) {
            fontSizeToUse = minFontSize;
            wrapText = true;
          }

          // Set font settings to draw it correctly.
          ctx.textAlign = 'center';
          ctx.textBaseline = 'middle';
          var centerX = ((chart.chartArea.left + chart.chartArea.right) / 2);
          var centerY = ((chart.chartArea.top + chart.chartArea.bottom) / 2);
          ctx.font = fontSizeToUse + "px " + fontStyle;
          ctx.fillStyle = color;

          if (!wrapText) {
            ctx.fillText(txt, centerX, centerY);
            return;
          }

          var words = txt.split(' ');
          var line = '';
          var lines = [];

          // Break words up into multiple lines if necessary
          for (var n = 0; n < words.length; n++) {
            var testLine = line + words[n] + ' ';
            var metrics = ctx.measureText(testLine);
            var testWidth = metrics.width;
            if (testWidth > elementWidth && n > 0) {
              lines.push(line);
              line = words[n] + ' ';
            } else {
              line = testLine;
            }
          }

          // Move the center up depending on line height and number of lines
          centerY -= (lines.length / 2) * lineHeight;

          for (var n = 0; n < lines.length; n++) {
            ctx.fillText(lines[n], centerX, centerY);
            centerY += lineHeight;
          }
          //Draw text in center
          ctx.fillText(line, centerX, centerY);
        }
      }
    });


var config = {
  type: 'doughnut',
  data: {
    labels: [
      "Equipment fine",
      "Others"
    ],
    datasets: [{
      data: [{{scctvlog}},{{ scctvmaintain }} + {{ scctvrep }}],   /*check here*/
      backgroundColor: [
        "#10E980",
        "#DBDBDB"
      ],
      
       borderColor: "white",
            borderWidth: 2
    }]
  },
  
  options: {
    legend:{
      display:false
    },
    cutoutPercentage:70,

    elements: {
      center: {
        text:'ðŸ‘',
        color: '#1e27fa', // Default is #000000
        fontStyle: 'Arial', // Default is Arial
        sidePadding: 20, // Default is 20 (as a percentage)
        minFontSize: 15, // Default is 20 (in px), set to false and text will not wrap.
        lineHeight: 25 // Default is 25 (in px), used for when text wraps
      }
    }
  }
};

var ctx = document.getElementById("snotreq").getContext("2d");
var myChart = new Chart(ctx, config);

</script>

</body>
</html>